import React, { useState } from "react";

import EditVulnForm from "./EditVulnForm";
import VulnCard from "./VulnCard";

export default function VulnerabilityList({ vulns, hasSearched }) {
  const [editingId, setEditingId] = useState(null);

  if (!hasSearched) {
    return <p className="hint">ðŸ”Ž Search for a vulnerability above â†‘</p>;
  }

  if (!vulns?.length) {
    return <p className="hint">No vulnerabilities found.</p>;
  }

  return (
    <div className="vuln-list">
      {vulns.map((v) =>
        editingId === v._id ? (
          <EditVulnForm
            key={v._id}
            vuln={v}
            onCancel={() => setEditingId(null)}
            onSaved={() => setEditingId(null)}
          />
        ) : (
          <VulnCard key={v._id} vuln={v} onEdit={() => setEditingId(v._id)} />
        )
      )}
    </div>
  );
}
